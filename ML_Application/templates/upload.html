{% extends 'base.html' %}

{% block content %}
<div class="min-h-screen bg-[#05172a] text-white flex flex-col items-center py-8">
    <!-- Page Title -->
    <!-- <h1 class="text-3xl font-bold mb-8">Upload Your Files</h1> -->

    <!-- Upload Form -->
    <div class="bg-[#0d253c] p-6 rounded-lg shadow-lg w-full max-w-lg">
        <h2 class="text-xl font-semibold mb-4">Upload a New File</h2>
        <form method="post" enctype="multipart/form-data" class="space-y-4">
            {% csrf_token %}
            {{ form.as_p }}
            <button 
                type="submit" 
                style="background-color: rgb(31, 31, 155);" 
                class="w-full bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2 rounded transition duration-300">
                Upload File
            </button>
        </form>
    </div>
    <br>
    <!-- Uploaded Files Table -->
    <div class="mt-10 w-full max-w-4xl">
        <h2 class="text-2xl font-semibold mb-4">Your Uploaded Files</h2>

        {% if datasets %}
        <table class="table-auto w-full bg-[#0d253c] text-left rounded-lg shadow-lg overflow-hidden">
            <thead class="bg-[#122b45] text-white uppercase text-sm">
                <tr>
                    <th class="px-4 py-3">Name</th>
                    <th class="px-4 py-3">Path</th>
                    <th class="px-4 py-3 text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for dataset in datasets %}
                <tr class="hover:bg-[#1c3a5a]">
                    <td class="px-4 py-3">{{ dataset.name }}</td>
                    <td class="px-4 py-3">
                        <a 
                            href="{{ dataset.file.url }}" 
                            target="_blank" 
                            class="text-blue-400 hover:text-blue-300 underline">
                            {{ dataset.file.url }}
                        </a>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <form action="{% url 'delete_dataset' dataset.id %}" method="post" class="inline">
                            {% csrf_token %}
                            <button 
                                type="submit" 
                                style="background-color: rgb(31, 31, 155);" 
                                class="bg-red-600 hover:bg-red-500 text-white font-semibold py-1 px-4 rounded transition duration-300"
                                onclick="return confirm('Are you sure you want to delete this file?');">
                                Delete
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-gray-300 text-center">No files uploaded yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
